package project;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/mainServlet")
public class a2Main extends HttpServlet {
	private static final long serialVersionUID = 1L;

	public static int questionID = 0;
	public static Map<Integer, String> questions = new HashMap<Integer, String>();
	public static Map<Integer, String> answers = new HashMap<Integer, String>();
	
	protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
		HttpSession session = request.getSession(false);
		
		// Pressed the submit question button
		boolean submittingQuestion = request.getParameter("submitQuestionButton") != null;
		if (submittingQuestion)
		{
			// If we're editing a question, use it's ID. Otherwise if we're adding a new question, use a new ID and increment it.
			Integer editingQuestion = (request.getParameter("id").toString() != "") ? Integer.parseInt(request.getParameter("id")) : questionID++;
			
			// Add the question/answer to the list
			questions.put(editingQuestion, request.getParameter("question").toString());
			answers.put(editingQuestion, request.getParameter("answer").toString());
			
			// Redirect the user
			response.sendRedirect("a2Question.jsp");
		}
	}
}
